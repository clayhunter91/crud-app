<html><head></head><body><p>In April 2024, <strong>Gonzalo Paz</strong> makes this interesting contribution:</p><p><br></p><p><strong>Proper Deployment of the Application Backend<br><br></strong>Among other well-detailed options in the document provided by the instructor, Render gives us the option to enter a "start command," that is, the command that will run on the server to operate the application. In the local environment while we develop, we generally used `uvicorn main:app --reload`.<br><br>However, if we use this command on Render, the application will not be able to start successfully. For everything to work correctly (in addition to setting the environment variables with the values of the database deployed in the cloud), it is necessary to use a slightly different command: `uvicorn main:app --host 0.0.0.0 --port $PORT`.<br><br>I hope this contribution can help in case someone has this issue.</p><p><br></p><p>Thank you very much for your contribution, Gonzalo! Bravo, that's how an AI Engineer works: when you find a problem, you investigate, experiment, and solve it. You're one step away from achieving the Honor Student distinction! ðŸ’ª</p><p><br></p><p><br>On the same topic, and also in April 2024, <strong>Isabel GonzÃ¡lez</strong> adds this interesting contribution:</p><p><br>I have been researching and there would be two options to solve it.</p><p><br>The first option would be to adapt the server's boot instruction to a production environment. Although locally we used uvicorn main:app --reload for automatic code reloading, this mode might not be the most suitable for production because it can affect performance and stability. On Render, it is recommended to use gunicorn as an HTTP server, since it better manages processes in production and is capable of handling multiple simultaneous requests more efficiently.</p><p><br>To configure gunicorn with an ASGI server like Uvicorn on Render, you should follow these steps:</p><p><br>Make sure to have gunicorn and uvicorn in your requirements file: Add gunicorn and uvicorn[standard] to your requirements.txt file to ensure both packages are installed in your production environment. It might look like this:</p><p><br>gunicorn uvicorn[standard]</p><p><br><br>Set up the start command for Render: Instead of using uvicorn directly, you will use gunicorn with an UvicornWorker worker class to run your application. The startup instruction for your application on Render could be something like this:</p><p>gunicorn main:app -w 4 -k uvicorn.workers.UvicornWorker</p><p><br></p><p>The second option, if you want to keep uvicorn:<br><br>Use uvicorn directly as a server in production, although gunicorn is generally recommended for its robust features in handling multiple workers and better process management. However, uvicorn is a lightweight and fast ASGI server that is perfectly capable of handling applications in production, especially if your application does not expect an extremely high load or does not require handling multiple processes.</p><p><br>To use uvicorn in Render or other production environments, you can configure the startup command without the --reload flag (which is for development and allows automatic code reloading upon detecting changes). A typical startup command for uvicorn in production might look like this:</p><p>uvicorn main:app --host 0.0.0.0 --port 8000 --workers 4</p><p><br>Here are the configuration details:</p><p>main:app: Make sure that 'main' is your file where the application instance is created, and 'app' is the application instance.</p><p><br></p><p>--host 0.0.0.0: This ensures that the server is accessible from all IP addresses.</p><p>--port 8000: Specifies the port on which the server will be listening.</p><p>--workers 4: This starts multiple instances of uvicorn to handle concurrent requests, similar to how gunicorn manages its workers. This is useful to leverage multiple CPU cores. Make sure to adjust the number of workers based on the available resources and expected load.</p><p><br></p><p>Thank you very much for your contribution, Isabel! Bravo, that's the way an AI Engineer works: when you find a problem, you research, experiment, and solve it. You are very close to achieving the Honor Student distinction! ðŸ’ª</p></body></html>